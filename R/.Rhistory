activate("nodes") %>%
st_as_sf()
line
roads<- leaflet() %>%
# addProviderTiles("BasemapAT.grau") %>%
# addProviderTiles("Stamen.TerrainBackground") %>%
# addProviderTiles("Stamen.TonerBackground") %>%
addTiles() %>%
addMeasure() %>%
addScaleBar() %>%
addPolygons(data = network, fillOpacity = 0.3, weight = 1.2, color = "#444444", smoothFactor = 0.5) %>%
addPolygons(data = line, fillOpacity = 0.3, weight = 1.2, color = "blue", smoothFactor = 0.5) %>%
addMarkers(data= nodes,  label=as.character("start/end"))
roads<- leaflet() %>%
# addProviderTiles("BasemapAT.grau") %>%
# addProviderTiles("Stamen.TerrainBackground") %>%
# addProviderTiles("Stamen.TonerBackground") %>%
addTiles() %>%
addMeasure() %>%
addScaleBar() %>%
addPolylines(data = network, fillOpacity = 0.3, weight = 1.2, color = "#444444", smoothFactor = 0.5) %>%
addPolylines(data = line, fillOpacity = 0.3, weight = 1.2, color = "blue", smoothFactor = 0.5) %>%
addMarkers(data= nodes,  label=as.character("start/end"))
roads<- leaflet() %>%
# addProviderTiles("BasemapAT.grau") %>%
# addProviderTiles("Stamen.TerrainBackground") %>%
# addProviderTiles("Stamen.TonerBackground") %>%
addTiles() %>%
addMeasure() %>%
addScaleBar() %>%
addPolylines(data = network, fillOpacity = 0.3, weight = 1.2, color = "#444444", smoothFactor = 0.5) %>%
addPolylines(data = line, fillOpacity = 0.3, weight = 1.2, color = "blue", smoothFactor = 0.5) %>%
addMarkers(data= nodes,  label=as.character("start/end"))
roads<- leaflet() %>%
# addProviderTiles("BasemapAT.grau") %>%
# addProviderTiles("Stamen.TerrainBackground") %>%
# addProviderTiles("Stamen.TonerBackground") %>%
addTiles() %>%
addMeasure() %>%
addScaleBar() %>%
addPolylines(data = network, fillOpacity = 0.3, weight = 1.2, color = "#444444", smoothFactor = 0.5) %>%
addPolylines(data = line, fillOpacity = 0.3, weight = 1.2, color = "blue", smoothFactor = 0.5) %>%
addMarkers(data= nodes,  label=as.character("start/end"))
roads<- leaflet() %>%
# addProviderTiles("BasemapAT.grau") %>%
# addProviderTiles("Stamen.TerrainBackground") %>%
# addProviderTiles("Stamen.TonerBackground") %>%
addTiles() %>%
addMeasure() %>%
addScaleBar() %>%
addPolylines(data = network, fillOpacity = 0.3, weight = 1.2, color = "#444444", smoothFactor = 0.5)
roads
line
line<-paths %>%  net %>%
activate("nodes") %>%
slice(node_path)
network<- features$osm_lines
net = as_sfnetwork(network, directed = FALSE) %>%
# st_transform(3035) %>%
activate("edges") %>%
mutate(weight = edge_length())
line<-paths %>%  net %>%
activate("nodes") %>%
slice(node_path)
line<-paths %>%
activate("nodes") %>%
slice(node_path)
line<-paths %>%
activate("nodes") %>%
slice(node_path)
plot_path = function(node_path) {
net %>%
activate("nodes") %>%
slice(node_path)
}
plot_path = function(node_path) {
net %>%
activate("nodes") %>%
slice(node_path)
}
line<-paths %>%
pull(node_paths) %>%
walk(plot_path)
line
line<-paths %>%
pull(node_paths) %>%
walk(plot_path)
line
paths %>%
pull(node_paths) %>%
walk(plot_path)
paths
paths$edge_paths
paths %>%
pull(edge_paths)
net
paths %>%
pull(edge_paths)
paths %>%
pull(edge_paths) %>%
walk(plot_path)
paths
paths %>%
pull(edge_paths)
eed<-
paths %>%
pull(edge_paths)
net %>%
activate("nodes")
net %>%
activate("edges")
net %>%
activate("edges") %>%
st_as_sf() %>%
slice(eed)
net %>%
activate("edges") %>%
st_as_sf()
eed
eed<-
paths %>%
pull(edge_paths)  $slice(1)
eed<-
paths %>%
pull(edge_paths)  %>% slice(1)
eed<-
paths %>%
pull(edge_paths)
eed
edd[1]
eed[1]
eed<-
paths %>%
pull(edge_paths)  %>% unlist()
eed
net %>%
activate("edges") %>%
st_as_sf() %>%
slice(eed)
line<-
net %>%
activate("edges") %>%
st_as_sf() %>%
slice(eed)
line
roads<- leaflet() %>%
# addProviderTiles("BasemapAT.grau") %>%
# addProviderTiles("Stamen.TerrainBackground") %>%
# addProviderTiles("Stamen.TonerBackground") %>%
addTiles() %>%
addMeasure() %>%
addScaleBar() %>%
addPolylines(data = network, fillOpacity = 0.3, weight = 1.2, color = "#444444", smoothFactor = 0.5) %>%
addPolylines(data = line, fillOpacity = 0.3, weight = 1.2, color = "blue", smoothFactor = 0.5) %>%
addMarkers(data= nodes,  label=as.character("start/end"))
roads
paths = st_network_paths(net, from = 1, to = 12)
#
# paths %>%
#   slice(1) %>%
#   pull(node_paths) %>%
#   unlist()
#
#
# paths %>%
#   slice(1) %>%
#   pull(edge_paths) %>%
# unlist()
selected_edges<-
paths %>%
pull(edge_paths)  %>% unlist()
selected_route<-net %>%
activate("edges") %>%
st_as_sf() %>%
slice(selected_edges)
#######
nodes_start_end<-net %>%
activate("nodes") %>%
st_as_sf() %>%
slice(c(1,12))
#########
roads<- leaflet() %>%
# addProviderTiles("BasemapAT.grau") %>%
# addProviderTiles("Stamen.TerrainBackground") %>%
# addProviderTiles("Stamen.TonerBackground") %>%
addTiles() %>%
addMeasure() %>%
addScaleBar() %>%
addPolylines(data = selected_route, fillOpacity = 0.3, weight = 1.2, color = "#444444", smoothFactor = 0.5) %>%
addPolylines(data = line, fillOpacity = 0.3, weight = 1.2, color = "blue", smoothFactor = 0.5) %>%
addMarkers(data= nodes_start_end,  label=as.character("start/end"))
roads
icoLst <- awesomeIconList(
start = makeAwesomeIcon(text = fa("flag"), markerColor = "green", squareMarker = TRUE),
finish = makeAwesomeIcon(text = fa("flag-checkered"), markerColor = "red", squareMarker = TRUE)
)
library(fontawesome)
icoLst <- awesomeIconList(
start = makeAwesomeIcon(text = fa("flag"), markerColor = "green", squareMarker = TRUE),
finish = makeAwesomeIcon(text = fa("flag-checkered"), markerColor = "red", squareMarker = TRUE)
)
icoLst
icoLst <- awesomeIconList(
start = makeAwesomeIcon(text = fa("flag-alt"), markerColor = "green", squareMarker = TRUE),
finish = makeAwesomeIcon(text = fa("flag-checkered"), markerColor = "red", squareMarker = TRUE)
)
icoLst <- awesomeIconList(
start = makeAwesomeIcon(text = fa("flag"), markerColor = "green", squareMarker = TRUE),
finish = makeAwesomeIcon(text = fa("flag-checkered"), markerColor = "red", squareMarker = TRUE)
)
icoLst <- awesomeIconList(
start = makeAwesomeIcon(text = fa("flag"), markerColor = "green", squareMarker = FALSE),
finish = makeAwesomeIcon(text = fa("flag-checkered"), markerColor = "red", squareMarker = FALSE)
)
roads<- leaflet() %>%
# addProviderTiles("BasemapAT.grau") %>%
# addProviderTiles("Stamen.TerrainBackground") %>%
# addProviderTiles("Stamen.TonerBackground") %>%
addTiles() %>%
addMeasure() %>%
addScaleBar() %>%
addPolylines(data = selected_route, fillOpacity = 0.3, weight = 1.2, color = "#444444", smoothFactor = 0.5) %>%
addPolylines(data = line, fillOpacity = 0.3, weight = 1.2, color = "blue", smoothFactor = 0.5) %>%
# addMarkers(data= nodes_start,  label=as.character("start/end")) %>%
# addMarkers(data= nodes_end,  label=as.character("start/end")) %>%
addAwesomeMarkers(data = nodes_start, icon = icoLst$start, opacity = 0.8) %>%
addAwesomeMarkers(data = nodes_start, icon = icoLst$finish, opacity = 0.8)
roads<- leaflet() %>%
# addProviderTiles("BasemapAT.grau") %>%
# addProviderTiles("Stamen.TerrainBackground") %>%
# addProviderTiles("Stamen.TonerBackground") %>%
addTiles() %>%
addMeasure() %>%
addScaleBar() %>%
addPolylines(data = selected_route, fillOpacity = 0.3, weight = 1.2, color = "#444444", smoothFactor = 0.5) %>%
addPolylines(data = line, fillOpacity = 0.3, weight = 1.2, color = "blue", smoothFactor = 0.5) %>%
# addMarkers(data= nodes_start,  label=as.character("start/end")) %>%
# addMarkers(data= nodes_end,  label=as.character("start/end")) %>%
addAwesomeMarkers(data = nodes_start, icon = icoLst$start) %>%
addAwesomeMarkers(data = nodes_start, icon = icoLst$finish)
nodes_start<-net %>%
activate("nodes") %>%
st_as_sf() %>%
slice(1)
nodes_end<-net %>%
activate("nodes") %>%
st_as_sf() %>%
slice(12)
roads<- leaflet() %>%
# addProviderTiles("BasemapAT.grau") %>%
# addProviderTiles("Stamen.TerrainBackground") %>%
# addProviderTiles("Stamen.TonerBackground") %>%
addTiles() %>%
addMeasure() %>%
addScaleBar() %>%
addPolylines(data = selected_route, fillOpacity = 0.3, weight = 1.2, color = "#444444", smoothFactor = 0.5) %>%
addPolylines(data = line, fillOpacity = 0.3, weight = 1.2, color = "blue", smoothFactor = 0.5) %>%
# addMarkers(data= nodes_start,  label=as.character("start/end")) %>%
# addMarkers(data= nodes_end,  label=as.character("start/end")) %>%
addAwesomeMarkers(data = nodes_start, icon = icoLst$start) %>%
addAwesomeMarkers(data = nodes_start, icon = icoLst$finish)
roads
icoLst <- awesomeIconList(
start = makeAwesomeIcon(text = fa("play"), markerColor = "green", squareMarker = FALSE),
finish = makeAwesomeIcon(text = fa("flag-checkered"), markerColor = "red", squareMarker = FALSE)
)
icoLst
roads<- leaflet() %>%
# addProviderTiles("BasemapAT.grau") %>%
# addProviderTiles("Stamen.TerrainBackground") %>%
# addProviderTiles("Stamen.TonerBackground") %>%
addTiles() %>%
addMeasure() %>%
addScaleBar() %>%
addPolylines(data = selected_route, fillOpacity = 0.3, weight = 1.2, color = "#444444", smoothFactor = 0.5) %>%
addPolylines(data = line, fillOpacity = 0.3, weight = 1.2, color = "blue", smoothFactor = 0.5) %>%
# addMarkers(data= nodes_start,  label=as.character("start/end")) %>%
# addMarkers(data= nodes_end,  label=as.character("start/end")) %>%
addAwesomeMarkers(data = nodes_start, icon = icoLst$start) %>%
addAwesomeMarkers(data = nodes_start, icon = icoLst$finish)
roads
icoLst <- awesomeIconList(
start = makeAwesomeIcon(text = fa("play"), markerColor = "green", squareMarker = FALSE)
# finish = makeAwesomeIcon(text = fa("flag-checkered"), markerColor = "red", squareMarker = FALSE)
)
icoLst
roads<- leaflet() %>%
# addProviderTiles("BasemapAT.grau") %>%
# addProviderTiles("Stamen.TerrainBackground") %>%
# addProviderTiles("Stamen.TonerBackground") %>%
addTiles() %>%
addMeasure() %>%
addScaleBar() %>%
addPolylines(data = selected_route, fillOpacity = 0.3, weight = 1.2, color = "#444444", smoothFactor = 0.5) %>%
addPolylines(data = line, fillOpacity = 0.3, weight = 1.2, color = "blue", smoothFactor = 0.5) %>%
# addMarkers(data= nodes_start,  label=as.character("start/end")) %>%
# addMarkers(data= nodes_end,  label=as.character("start/end")) %>%
addAwesomeMarkers(data = nodes_start, icon = icoLst$start) %>%
addAwesomeMarkers(data = nodes_end, icon = icoLst$finish)
roads
icoLst <- awesomeIconList(
start = makeAwesomeIcon(text = fa("play"), markerColor = "green", squareMarker = FALSE),
finish = makeAwesomeIcon(text = fa("flag-checkered"), markerColor = "red", squareMarker = FALSE)
)
roads<- leaflet() %>%
# addProviderTiles("BasemapAT.grau") %>%
# addProviderTiles("Stamen.TerrainBackground") %>%
# addProviderTiles("Stamen.TonerBackground") %>%
addTiles() %>%
addMeasure() %>%
addScaleBar() %>%
addPolylines(data = selected_route, fillOpacity = 0.3, weight = 1.2, color = "#444444", smoothFactor = 0.5) %>%
addPolylines(data = line, fillOpacity = 0.3, weight = 1.2, color = "blue", smoothFactor = 0.5) %>%
# addMarkers(data= nodes_start,  label=as.character("start/end")) %>%
# addMarkers(data= nodes_end,  label=as.character("start/end")) %>%
addAwesomeMarkers(data = nodes_start, icon = icoLst$start) %>%
addAwesomeMarkers(data = nodes_end, icon = icoLst$finish)
roads
net = as_sfnetwork(network, directed = TRUE) %>%
# st_transform(3035) %>%
activate("edges") %>%
mutate(weight = edge_length())
paths = st_network_paths(net, from = 1, to = 12)
selected_edges<-
paths %>%
pull(edge_paths)  %>% unlist()
selected_route<-net %>%
activate("edges") %>%
st_as_sf() %>%
slice(selected_edges)
#######
nodes_start<-net %>%
activate("nodes") %>%
st_as_sf() %>%
slice(1)
nodes_end<-net %>%
activate("nodes") %>%
st_as_sf() %>%
slice(12)
#########
icoLst <- awesomeIconList(
start = makeAwesomeIcon(text = fa("play"), markerColor = "green", squareMarker = FALSE),
finish = makeAwesomeIcon(text = fa("flag-checkered"), markerColor = "red", squareMarker = FALSE)
)
roads<- leaflet() %>%
# addProviderTiles("BasemapAT.grau") %>%
# addProviderTiles("Stamen.TerrainBackground") %>%
# addProviderTiles("Stamen.TonerBackground") %>%
addTiles() %>%
addMeasure() %>%
addScaleBar() %>%
addPolylines(data = selected_route, fillOpacity = 0.3, weight = 1.2, color = "#444444", smoothFactor = 0.5) %>%
addPolylines(data = line, fillOpacity = 0.3, weight = 1.2, color = "blue", smoothFactor = 0.5) %>%
# addMarkers(data= nodes_start,  label=as.character("start/end")) %>%
# addMarkers(data= nodes_end,  label=as.character("start/end")) %>%
addAwesomeMarkers(data = nodes_start, icon = icoLst$start) %>%
addAwesomeMarkers(data = nodes_end, icon = icoLst$finish)
roads
roads<- leaflet() %>%
# addProviderTiles("BasemapAT.grau") %>%
# addProviderTiles("Stamen.TerrainBackground") %>%
# addProviderTiles("Stamen.TonerBackground") %>%
addTiles() %>%
addMeasure() %>%
addScaleBar() %>%
addPolylines(data =network, fillOpacity = 0.3, weight = 1.2, color = "#444444", smoothFactor = 0.5) %>%
addPolylines(data = selected_route, fillOpacity = 0.3, weight = 1.2, color = "blue", smoothFactor = 0.5) %>%
# addMarkers(data= nodes_start,  label=as.character("start/end")) %>%
# addMarkers(data= nodes_end,  label=as.character("start/end")) %>%
addAwesomeMarkers(data = nodes_start, icon = icoLst$start) %>%
addAwesomeMarkers(data = nodes_end, icon = icoLst$finish)
roads
roads<- leaflet() %>%
addProviderTiles(providers$Stamen.Toner, group = "Stamen") %>%
addProviderTiles(providers$Stamen.TonerLite, group = "StamenLite") %>%
addTiles(group = "OSM") %>%
addTiles() %>%
addMeasure() %>%
addScaleBar() %>%
addPolylines(data =network, fillOpacity = 0.3, weight = 1.2, color = "#444444", smoothFactor = 0.5, group="network") %>%
addPolylines(data = selected_route, fillOpacity = 0.3, weight = 1.2, color = "blue", smoothFactor = 0.5, group="path") %>%
addAwesomeMarkers(data = nodes_start, icon = icoLst$start, group = "start/end") %>%
addAwesomeMarkers(data = nodes_end, icon = icoLst$finish, group = "start/end") %>%
addLayersControl(
baseGroups = c("Stamen", "StamenLite","OSM"),
overlayGroups = c("network", "path", "start/end"),
options = layersControlOptions(collapsed = TRUE)
) %>%
hideGroup("network")
roads
roads
roads<- leaflet() %>%
addProviderTiles(providers$Stamen.Toner, group = "Stamen") %>%
addProviderTiles(providers$Stamen.TonerLite, group = "StamenLite") %>%
addTiles(group = "OSM") %>%
addTiles() %>%
addMeasure() %>%
addScaleBar() %>%
addPolylines(data =network, fillOpacity = 0.3, weight = 1.2, color = "#444444", smoothFactor = 0.5, group="network") %>%
addPolylines(data = selected_route, fillOpacity = 0.3, weight = 1.2, color = "blue", smoothFactor = 0.5, group="path") %>%
addAwesomeMarkers(data = nodes_start, icon = icoLst$start, group = "start/end") %>%
addAwesomeMarkers(data = nodes_end, icon = icoLst$finish, group = "start/end") %>%
addLayersControl(
baseGroups = c("OSM","Stamen", "StamenLite"),
overlayGroups = c("network", "path", "start/end"),
options = layersControlOptions(collapsed = TRUE)
) %>%
hideGroup("network")
roads
nodes_end<-net %>%
activate("nodes") %>%
st_as_sf() %>%
slice(12)
paths
paths1
paths[1,]
??sfnetworks
?st_network_paths
paths = st_network_cost(net, from = 1, to = 12)
paths
paths = st_network_paths(net, from = 1, to = 12)
paths
paths[1]
paths[1,
]
selected_route<-net %>%
activate("edges") %>%
st_as_sf() %>%
slice(selected_edges)
slected_route
selected_route
selected_route$length
st_length(selected_route)
length<- st_length(selected_route) %>% sum()
length
length<- st_length(selected_route) %>% sum()
cost = st_network_cost(net, from = 1, to = 12)
cost
roads
cost = st_network_cost(net, from = 1, to = 12)
costr
cost
nodes_end<-net %>%
activate("nodes") %>%
st_as_sf() %>%
slice(1200)
roads<- leaflet() %>%
addProviderTiles(providers$Stamen.Toner, group = "Stamen") %>%
addProviderTiles(providers$Stamen.TonerLite, group = "StamenLite") %>%
addTiles(group = "OSM") %>%
addTiles() %>%
addMeasure() %>%
addScaleBar() %>%
addPolylines(data =network, fillOpacity = 0.3, weight = 1.2, color = "#444444", smoothFactor = 0.5, group="network") %>%
addPolylines(data = selected_route, fillOpacity = 0.3, weight = 1.2, color = "blue", smoothFactor = 0.5, group="path") %>%
addAwesomeMarkers(data = nodes_start, icon = icoLst$start, group = "start/end") %>%
addAwesomeMarkers(data = nodes_end, icon = icoLst$finish, group = "start/end") %>%
addLayersControl(
baseGroups = c("OSM","Stamen", "StamenLite"),
overlayGroups = c("network", "path", "start/end"),
options = layersControlOptions(collapsed = TRUE)
) %>%
hideGroup("network")
roads
paths = st_network_paths(net, from = 1, to = 1200)
st_network_cost
cost = st_network_cost(net, from = 1, to = 1200)
paths = st_network_paths(net, from = 1, to = 1200)
cost = st_network_cost(net, from = 1, to = 1200)
cost
##########
selected_edges<-
paths %>%
pull(edge_paths)  %>% unlist()
selected_route<-net %>%
activate("edges") %>%
st_as_sf() %>%
slice(selected_edges)
length<- st_length(selected_route) %>% sum()
length
#######
nodes_start<-net %>%
activate("nodes") %>%
st_as_sf() %>%
slice(1)
nodes_end<-net %>%
activate("nodes") %>%
st_as_sf() %>%
slice(1200)
#########
icoLst <- awesomeIconList(
start = makeAwesomeIcon(text = fa("play"), markerColor = "green", squareMarker = FALSE),
finish = makeAwesomeIcon(text = fa("flag-checkered"), markerColor = "red", squareMarker = FALSE)
)
roads<- leaflet() %>%
addProviderTiles(providers$Stamen.Toner, group = "Stamen") %>%
addProviderTiles(providers$Stamen.TonerLite, group = "StamenLite") %>%
addTiles(group = "OSM") %>%
addTiles() %>%
addMeasure() %>%
addScaleBar() %>%
addPolylines(data =network, fillOpacity = 0.3, weight = 1.2, color = "#444444", smoothFactor = 0.5, group="network") %>%
addPolylines(data = selected_route, fillOpacity = 0.3, weight = 1.2, color = "blue", smoothFactor = 0.5, group="path") %>%
addAwesomeMarkers(data = nodes_start, icon = icoLst$start, group = "start/end") %>%
addAwesomeMarkers(data = nodes_end, icon = icoLst$finish, group = "start/end") %>%
addLayersControl(
baseGroups = c("OSM","Stamen", "StamenLite"),
overlayGroups = c("network", "path", "start/end"),
options = layersControlOptions(collapsed = TRUE)
) %>%
hideGroup("network")
roads
